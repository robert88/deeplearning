<!--  -->
<div id="previewPagePopup" class="pagePopup">
	<div class="mask"></div>
	<div class="changField">
		<div class="header">
			<span>更改域设置</span>
			<span class="closePopup J-close"></span>
		</div>

		<div class="tree popupWrap">
			<ul class="menuWrap">
				<li class="mainMenu">
					<div class="desc">
						<span class="triangle"></span>
						<span class="radio"></span>
						<span class="text">华为大学</span>
					</div>
					<ul class="subMenu">
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学eee</span>
							</div>
							<span class="bg fl"></span>

							<ul class="subMenu">
								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学eee</span>
									</div>
									<span class="bg fl"></span>


									<ul class="subMenu">
										<li>
											<div class="desc">
												<span class="triangle"></span>
												<span class="radio"></span>
												<span class="text">华为大学</span>
											</div>
											<span class="bg fl"></span>
										</li>

										<li>
											<div class="desc">
												<span class="triangle"></span>
												<span class="radio"></span>
												<span class="text">华为大学</span>
											</div>
											<span class="bg fl"></span>
										</li>

										<li>
											<div class="desc">
												<span class="triangle"></span>
												<span class="radio"></span>
												<span class="text">华为大学</span>
											</div>
											<span class="bg fl"></span>
										</li>

										<li>
											<div class="desc">
												<span class="triangle" style="display: none;"></span>
												<span class="radio"></span>
												<span class="text">华为大学</span>
											</div>
											<span class="bg fl" style="background-position: -62px -54px;"></span>
										</li>
									</ul>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl" style="background-position: -62px -54px;"></span>
								</li>
							</ul>
						</li>
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl" style="background-position: -62px -54px;"></span>
							<ul class="subMenu">
								<li>
									<div class="desc">
										<span class="triangle" style="display: none;"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle" style="display: none;"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle" style="display: none;"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle" style="display: none;"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl" style="background-position: -62px -54px;"></span>
								</li>
							</ul>
						</li>
					</ul>
				</li>

				<li class="mainMenu">
					<div class="desc">
						<span class="triangle"></span>
						<span class="radio"></span>
						<span class="text">产品与解决方案</span>
					</div>
					<ul class="subMenu">
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl" style="background-position: -62px -54px;"></span>
							<ul class="subMenu">
								<li>
									<div class="desc">
										<span class="triangle" style="display: none;"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl"></span>
								</li>

								<li>
									<div class="desc">
										<span class="triangle"></span>
										<span class="radio"></span>
										<span class="text">华为大学</span>
									</div>
									<span class="bg fl" style="background-position: -62px -54px;"></span>
								</li>
							</ul>
						</li>
					</ul>
				</li>

				<li class="mainMenu">
					<div class="desc">
						<span class="triangle"></span>
						<span class="radio"></span>
						<span class="text">消费者bg</span>
					</div>
					<ul class="subMenu">
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl" style="background-position: -62px -54px;"></span>
						</li>
					</ul>
				</li>

				<li class="mainMenu">
					<div class="desc">
						<span class="triangle"></span>
						<span class="radio"></span>
						<span class="text">项目管理资源池</span>
					</div>
					<ul class="subMenu">
						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl"></span>
						</li>

						<li>
							<div class="desc">
								<span class="triangle"></span>
								<span class="radio"></span>
								<span class="text">华为大学</span>
							</div>
							<span class="bg fl" style="background-position: -62px -54px;"></span>
						</li>
					</ul>
				</li>
			</ul>
		</div>

		<div class="btnWrap">
			<a href="javascript:void(0);" class="save fr J-close">保存</a>
			<a href="javascript:void(0);" class="return fr J-close">取消</a>
		</div>
	</div>
</div>
<script>
	// 树形结构 S

	(function(){
		var $tree = $("#previewPagePopup").find(".tree")
		var liDom =$tree.find("li");
		if( liDom.find("ul").hasClass("subMenu") ){
			var bgDom =$tree.find( ".bg" );
			for( var i = 0;i < bgDom.length; i++ ){
				var last = bgDom.eq(i).parent().parent().children().length-1;
				// 改变样式
				if( bgDom.eq(i).parent().parent().hasClass("subMenu") && ( bgDom.eq(i).parent().index() == last ) ){
					bgDom.eq(i).css( { "backgroundPosition":"-62px -54px"  } );
					bgDom.eq(i).parent().css( "backgroundImage","none" );
				}
			}
		}

		// 没有子菜单的隐藏三角图标

		for( var i = 0; i<liDom.length;i++ ){
			if( !( liDom.eq(i).find("ul").hasClass("subMenu")) ){
				liDom.eq(i).find(".triangle").css( "display","none" );
			}
		}

		// 点击三角图标收缩展开子菜单

		$tree.find(".triangle").on( "click",function(){

			$(this).toggleClass( "active" );
			if( $(this).hasClass("active") ){
				$(this).parent().siblings("ul").slideDown();
			}else{
				$(this).parent().siblings("ul").slideUp();
			}
		} );

		// 单选操作

		$tree.find(".radio").on( "click",function(){
			$tree.find(".radio").removeClass("active");
			$(this).toggleClass( "active" );

			// 有子菜单的情况下
			if( $(this).parent().siblings().find("span").hasClass("radio") ){
				$(this).removeClass("active");
				if( $(this).hasClass("active") ){
					$(this).parent().siblings().find(".radio").addClass("active");
				}else{
					$(this).parent().siblings().find(".radio").removeClass("active");
				}
			}
		} );

	})();

	// 树形结构 E
</script>
